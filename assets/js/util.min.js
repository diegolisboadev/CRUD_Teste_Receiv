
// Funções a serem reutilizadas

/**
 * Requisiçõe usando a Fetch Api
 * @param {string} url 
 * @returns 
 */
async function fetchApi(url) {
    try {
        const result = await fetch(url);
        const data = await result.json();
        if(data.info == true) {
            return data.resultado;
        } else {
            alertPersonalizado("Erro!", data.resultado, "error");
        }
    } catch(err) {
        alertPersonalizado("Erro na Consulta!", "Tente! Novamente!", "error");
    }
}

/**
 * Uma alert personalizado retornando 
 * uma reposta para o Cliente
 * 
 * Após ações reload page
 * 
 * @param {string} titulo
 * @param {string} texto
 * @param {string} icon
 * 
 * @returns 
 */
function alertPersonalizado(titulo, texto, icon) {
    swal(titulo, texto, icon)
    .then((e) => {
        window.location.reload();
    });
}

/**
 * 
 * @param {string} date
 * @returns 
 */
function formateDate(date, datetime=false) {
    if(datetime) {
        //new Date().format('dd-m-yy'); 
        return dayjs(date).format('DD/MM/YYYY | HH:m:s');
    } else {
        return dayjs(date).format('DD/MM/YYYY')
    }
}

/**
 * Formatar um valor money para o formato BRL - Real Brasil
 * 
 *  url - trecho de codigo retirado: 
 * (http://wbruno.com.br/expressao-regular/formatar-em-moeda-reais-expressao-regular-em-javascript/)
 * 
 * @param {*} preco 
 */
 function dinheiroFormatoBrl(preco) {
    var tmp = preco.replace('.', '') + '';
    tmp = tmp.replace(/([0-9]{2})$/g, ",$1");
    if(tmp.length > 6) { tmp = tmp.replace(/([0-9]{3}),([0-9]{2}$)/g, ".$1,$2"); }
    return tmp;
}

/**
 * Base Path Aplicação
 * 
 * @return basePath
 */
function basePath() {
    return window.location.origin;
}